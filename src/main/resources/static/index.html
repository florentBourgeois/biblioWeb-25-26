<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bibliothèque</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            padding: 2rem;
        }

        h1 {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2rem;
            color: #2c3e50;
        }

        #loading {
            text-align: center;
            font-size: 1.1rem;
            color: #888;
            margin-top: 2rem;
        }

        #error-message {
            text-align: center;
            color: #e74c3c;
            font-size: 1.1rem;
            margin-top: 2rem;
            display: none;
        }

        #livres-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .card-titre {
            font-size: 1.1rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .card-auteur {
            font-size: 0.95rem;
            color: #7f8c8d;
            font-style: italic;
        }

        .card-info {
            font-size: 0.85rem;
            color: #95a5a6;
        }

        .card-isbn {
            font-size: 0.8rem;
            color: #bdc3c7;
            margin-top: auto;
            padding-top: 0.5rem;
            border-top: 1px solid #ecf0f1;
        }
    </style>
</head>
<body>

<h1>Catalogue de la Bibliothèque</h1>

<p id="loading">Chargement des livres…</p>
<p id="error-message">Impossible de charger les livres. Vérifiez que le serveur est démarré.</p>

<div id="livres-container"></div>

<script>
    async function chargerLivres() {
        const loading = document.getElementById('loading');
        const errorMsg = document.getElementById('error-message');
        const container = document.getElementById('livres-container');

            const response = await fetch('http://localhost:8080/livres/short');


            const livres = await response.json();

            loading.style.display = 'none';

            if (livres.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:#888;">Aucun livre disponible.</p>';
                return;
            }

            listeExemple.forEach(livre => {
                const card = document.createElement('div');
                card.classList.add('card');

                card.innerHTML = `
                    <div class="card-titre">titre : ${livre.titre}</div>
                    <div class="card-auteur">auteur : ${livre.nomAuteur}</div>
                    <div class="card-info">annee : ${livre.anneePublication}</div>
                    <div class="card-isbn">ISBN : ${livre.isbn}</div>
                `;

                container.appendChild(card);
            });

    }

    let listeExemple = [];
    for (let i = 0; i < 10; i++) {
        listeExemple.push({"id": i, "titre": "titre"+i, "autheurID": i+100, "isbn": "isbn"+i});
    }

    chargerLivres();
</script>

</body>
</html>